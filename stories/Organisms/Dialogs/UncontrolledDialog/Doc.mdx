import { Meta, Title, Subtitle, Controls, Story } from "@storybook/blocks";
import * as UncontrolledDailogStories from "./index.stories";

<Meta of={UncontrolledDailogStories} />

<Title>\<UncontrolledDailog></Title>

<Subtitle>非控组件形式的 Dialog 对话框</Subtitle>

```tsx
import {
  UncontrolledDailog,
  type UncontrolledDailogProps,
  type UncontrolledDailogRef,
} from "myapp_uilib_react";
```

<Controls />

## 基本使用

需在使用 Dialog 的组件内使用 ref 控制开关状态

默认点击`esc`键以及点击背景会关闭 Dailog

<div className="my-code-block">
  <Story of={UncontrolledDailogStories.BaseExample} />
</div>

{/* prettier-ignore-start */}
```tsx
import React from "react";
import { UncontrolledDialog, type UncontrolledDialogRef } from "myapp_uilib_react";

function App(args) {
  const ref = React.useRef<UncontrolledDialogRef>(null);
  const handleOpen = () => ref.current?.handleOpen();

  return (
    <>
      <button onClick={handleOpen}>show dialog</button>

      <UncontrolledDialog
        ref={ref}
        dialogProps={{ maxWidth: "md" }}
        dialogTitle="Dialog Title"
        dialogActions="Dialog Actions"
      >
        Uncontrolled Dialog
      </UncontrolledDialog>
    </>
  );
}
```
{/* prettier-ignore-end */}

## 禁止逃逸关闭

禁止点击`esc`按键以及点击背景会关闭 Dialog

1. 将`escapeBackdropClick`设为`true`
2. 将`dialogProps.disableEscapeKeyDown`设为`false`

关闭 Dialog 的逻辑则建议在的`children`、`dialogTitle`、`dialogAction`上利用条件或事件实现

<div className="my-code-block">
  <Story of={UncontrolledDailogStories.EscapeExample} />
</div>

{/* prettier-ignore-start */}
```tsx
import React from "react";
import { UncontrolledDialog, type UncontrolledDialogRef } from "myapp_uilib_react";

function App(args) {
  const ref = React.useRef<UncontrolledDialogRef>(null);
  const handleOpen = () => ref.current?.handleOpen();
  const handleClose = () => ref.current?.handleClose();

  return (
    <>
      <button onClick={handleOpen}>show dialog</button>

      <UncontrolledDialog
        ref={ref}
        escapeBackdropClick
        dialogProps={{ maxWidth: "md", disableEscapeKeyDown: true }}
        dialogTitle={
          <>
            Dialog Title
            <button onClick={handleClose}>Close</button>
          </>
        }
        dialogActions={<button onClick={handleClose}>Close</button>}
      >
        Dialog Content
        <button onClick={handleClose}>Close</button>
      </UncontrolledDialog>
    </>
  );
}
```
{/* prettier-ignore-end */}

<style>
  {`
    /* personal code block */
    .my-code-block {
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  `}
</style>
