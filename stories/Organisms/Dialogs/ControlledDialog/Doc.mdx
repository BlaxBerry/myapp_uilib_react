import { Meta, Title, Subtitle, Controls, Story } from "@storybook/blocks";
import * as ControlledDailogStories from "./index.stories";

<Meta of={ControlledDailogStories} />

<Title>\<ControlledDailog></Title>

<Subtitle>受控组件形式的 Dialog 对话框</Subtitle>

```tsx
import {
  ControlledDailog,
  type ControlledDailogProps,
} from "myapp_uilib_react";
```

<Controls />

## 基本使用

需在使用 Dialog 的组件内使用 state 切换开关状态

默认点击`esc`键以及点击背景会关闭 Dailog

<div className="my-code-block">
  <Story of={ControlledDailogStories.BaseExample} />
</div>

```tsx
import React from "react";
import { ControlledDialog } from "myapp_uilib_react";

function App() {
  const [isOpen, setIsOpen] = React.useState<boolean>(false);
  const handleOpen = () => setIsOpen(true);
  const handleClose = () => setIsOpen(false);

  return (
    <>
      <button onClick={handleOpen}>show dialog</button>

      <ControlledDialog
        isOpen={isOpen}
        handleClose={handleClose}
        dialogProps={{ maxWidth: "md" }}
        dialogTitle="Dialog Title"
        dialogActions="Dialog Actions"
      >
        Dialog Content
      </ControlledDialog>
    </>
  );
}
```

## 禁止逃逸关闭

禁止点击`esc`按键以及点击背景会关闭 Dialog

1. 省略参数`handleClose`或赋值为`undefined`
2. 将`dialogProps.disableEscapeKeyDown`设为`false`

关闭 Dialog 的逻辑则建议在的`children`、`dialogTitle`、`dialogAction`上利用条件或事件实现

<div className="my-code-block">
  <Story of={ControlledDailogStories.EscapeExample} />
</div>

```tsx
import React from "react";
import { ControlledDialog } from "myapp_uilib_react";

function App() {
  const [isOpen, setIsOpen] = React.useState<boolean>(false);
  const handleOpen = () => setIsOpen(true);
  const handleClose = () => setIsOpen(false);

  return (
    <>
      <BaseButton onClick={handleOpen}>show dialog</BaseButton>

      <ControlledDialog
        isOpen={isOpen}
        dialogProps={{ maxWidth: "md", disableEscapeKeyDown: true }}
        dialogTitle={
          <>
            Dialog Title
            <button onClick={handleClose}>Close</button>
          </>
        }
        dialogActions={<button onClick={handleClose}>Close</button>}
      >
        Dialog Content
        <button onClick={handleClose}>Close</button>
      </ControlledDialog>
    </>
  );
}
```

<style>
  {`
    /* personal code bloack */
    .my-code-block {
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  `}
</style>
